package jp.azuki.mikeneko.web.tags;import javax.servlet.jsp.JspException;import jp.azuki.core.util.StringUtility;import jp.azuki.mikeneko.MikeNeko;import jp.azuki.mikeneko.account.Account;import jp.azuki.mikeneko.web.session.MikeNekoUserSession;import jp.azuki.web.tags.AbstractRenderingTag;/** * このクラスは、アカウント情報を表示するタグです。 *  * @since 1.0.0 * @version 1.0.0 2013/07/09 * @author Kawakicchi */public class AccountTag extends AbstractRenderingTag {	private String key;	public void setKey(final String aKey) {		key = aKey;	}	protected String getKey() {		return key;	}	/**	 * コンストラクタ	 */	public AccountTag() {		super(AccountTag.class);	}	@Override	protected void doRendering(final StringBuffer aRender) throws JspException {		Account account = null;		Object obj = getPageContext().getSession().getAttribute(MikeNeko.MIKENEKO_USER_SESSION_NAME);		if (obj instanceof MikeNekoUserSession) {			account = ((MikeNekoUserSession) obj).getAccount();		}		if (null != account) {			if (StringUtility.isNotEmpty(getKey())) {				Object value = account.getProperty().get(getKey());				if (null == value) {				} else if (value instanceof String) {					aRender.append(toStringEscapeHTML((String) value));				} else {					aRender.append(toStringEscapeHTML(value.toString()));				}			}		}	}}