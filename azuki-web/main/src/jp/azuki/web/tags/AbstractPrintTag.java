package jp.azuki.web.tags;import javax.servlet.jsp.JspException;import jp.azuki.core.util.StringUtility;/** * このクラスは、値の表示を行うための基底タグクラスです。 *  * @since 1.0.0 * @version 1.0.0 2013/07/11 * @author Kawakicchi */public abstract class AbstractPrintTag extends AbstractRenderingTag {	/**	 * 名前	 */	private String name;	/**	 * キー	 */	private String key;	/**	 * スコープ	 */	private String scope;	/**	 * コンストラクタ	 */	public AbstractPrintTag() {		super();	}	/**	 * コンストラクタ	 * 	 * @param aName 名前	 */	public AbstractPrintTag(final String aName) {		super(aName);	}	/**	 * コンストラクタ	 * 	 * @param aClass クラス	 */	public AbstractPrintTag(final Class<?> aClass) {		super(aClass);	}	/**	 * 名前を設定する。	 * 	 * @param aName 名前	 */	public final void setName(final String aName) {		name = aName;	}	/**	 * キーを設定する。	 * 	 * @param aKey キー	 */	public final void setKey(final String aKey) {		key = aKey;	}	/**	 * スコープを設定する。	 * 	 * @param aScope スコープ	 */	public final void setScope(final String aScope) {		scope = aScope;	}	/**	 * 名前を取得する。	 * 	 * @return 名前	 */	private String getName() {		return name;	}	/**	 * キーを取得する。	 * 	 * @return キー	 */	private String getKey() {		return key;	}	/**	 * スコープを取得する。	 * 	 * @return スコープ	 */	private String getScope() {		return scope;	}	@Override	protected final void doRendering(final StringBuffer aRender) throws JspException {		Object value = getValue();		if (null != value) {			aRender.append(doPrint(value));		}	}	/**	 * 値を取得する。	 * 	 * @return 値。値が見つからない場合は、<code>null</code>を返す。	 */	protected final Object getValue() {		Object value = null;		String scp = getScope().toLowerCase();		if ("page".equals(scp)) {			if (StringUtility.isNotEmpty(getKey())) {				value = getPageAttribute(getName(), getKey());			} else {				value = getPageAttribute(getName());			}		} else if ("request".equals(scp) || StringUtility.isEmpty(scp)) {			if (StringUtility.isNotEmpty(getKey())) {				value = getRequestAttribute(getName(), getKey());			} else {				value = getRequestAttribute(getName());			}		}		return value;	}	/**	 * 値を表示する。	 * 	 * @param aValue 値	 * @return 表示文字列	 * @throws JspException JSP操作に起因する問題が発生した場合	 */	protected abstract String doPrint(final Object aValue) throws JspException;}